@model KronoMata.Web.Models.HostViewModel 

<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Hosts</h3>
            </div>
            <div class="card-body table-responsive p-0" style="height: @(Model.Hosts.Count > 10 ? "350" : "200")px;">
                <div class="host-container">
                    @foreach(var host in Model.Hosts)
                    {
                        var bgClass = host.IsEnabled ? "bg-info" : "bg-gray";

                        <div class="host-item @bgClass">
                            <div class="inner">
                                <p>@host.MachineName</p>
                            </div>
                            <div class="icon">
                                <i class="fas fa-server"></i>
                            </div>
                            <a onclick="showHostInfo(@host.Id);" href="#" class="host-item-footer">
                                More info <i class="fas fa-arrow-circle-right"></i>
                            </a>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>
<div id="host-information">
    <div class="row">
        <div class="col-4">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Host</h3>
                </div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="host-machinename">Machine Name</label>
                        <input type="text" class="form-control" id="host-machinename" disabled>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" class="form-check-input" id="host-enabled">
                        <label class="form-check-label" for="host-enabled">Enabled?</label>
                    </div>
                </div>
                <div class="card-footer">
                    <input type="button" class="btn btn-secondary" value="Save" />
                </div>
            </div>
        </div>
        <div class="col-8">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">History</h3>
                </div>
                <div class="card-body">
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-4">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Scheduled Jobs</h3>
                </div>
                <div class="card-body">
                </div>
            </div>
        </div>
    </div>
</div>

@section styles {
    <style>
        .host-container {
            padding: 1em;
            display: grid;
            grid-gap: .5em;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        }

        .host-item {
            border-radius: 0.25rem;
            box-shadow: 0 0 1px rgba(0, 0, 0, 0.125), 0 1px 3px rgba(0, 0, 0, 0.2);
            display: block;
            position: relative;

            font-size: .7em;
        }

        .host-item > .inner {
            padding: 5px;
        }

        .host-item > .host-item-footer {
            background-color: rgba(0, 0, 0, 0.1);
            color: rgba(255, 255, 255, 0.8);
            display: block;
            padding: 3px 0;
            position: relative;
            text-align: center;
            text-decoration: none;
            z-index: 10;
        }

        .host-item > .host-item-footer:hover {
            background-color: rgba(0, 0, 0, 0.15);
            color: #fff;
        }

        .host-item h3 {
            font-size: 2.2rem;
            font-weight: 700;
            margin: 0 0 10px;
            padding: 0;
            white-space: nowrap;
        }

        .host-item .icon {
            color: rgba(0, 0, 0, 0.15);
            z-index: 0;
        }

        .host-item .icon > i {
            font-size: 90px;
            position: absolute;
            right: 15px;
            top: 15px;
            transition: -webkit-transform 0.3s linear;
            transition: transform 0.3s linear;
            transition: transform 0.3s linear, -webkit-transform 0.3s linear;
        }

        .host-item .icon > i.fa, .host-item .icon > i.fas, .host-item .icon > i.far, .host-item .icon > i.fab, .host-item .icon > i.fal, .host-item .icon > i.fad, .host-item .icon > i.ion {
            font-size: 40px;
            top: 20px;
        }
    </style>
}

@section scripts {
    <script type="text/javascript">
        var _hostId = -1;
        var _host;

        $(function () {
            $("#host-information").hide();
        });

        function showHostInfo(hostId) {
            _hostId = hostId;
            $("#host-information").show();
            populateHostInfo(hostId);
        }

        function populateHostInfo(hostId) {
            var db = GetData('@Url.Action("GetHostRelatedData", "Host")', { hostId: hostId })[0];
            var jobs = db.data.value.jobs;
            _host = db.data.value.host;

            $("#host-machinename").val(_host.machineName);
        }

    </script>
}